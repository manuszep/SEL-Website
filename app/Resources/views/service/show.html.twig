{% extends 'base.html.twig' %}

{% block header %}
    <header class="page-header angle-intro angle-reverse inline-heading">
        <div class="wrapper">
            <h1>{{ service.title }}</h1>

            {{ icons.iconlink('pencil', 'Modifier', path('service_edit', { 'id': service.id }), 'btn') }}

            <div class="service-author">
                {{ service.user.username }}
                <div class="service-author-image">
                    <a href="{{ path('user_show', { 'id': service.user.id }) }}"><img
                                src="{{ service.user.getPictureWebPath | imagine_filter('user_thumb') }}"
                                srcset="{{ service.user.getPictureWebPath | imagine_filter('user_thumb') }} 1x,
                                                {{ service.user.getPictureWebPath | imagine_filter('user_thumb2x') }} 2x" /></a>
                </div>
            </div>
        </div>
    </header>
{% endblock %}

{% block body %}
<section class="add-form">
    <div class="wrapper">
        <p class="service-meta">
            <span class="type">
                {{ icons.icon('tag', 'Type de service') }} <a href="{{ path('service_index', {service_filter: {type: service.type }}) }}">{{ service.typeLabel }}</a>
            </span>
            <span class="domain">
                {{ icons.icon('archive', 'Domaine') }} <a href="{{ path('service_index', {service_filter: {domain: service.domain }}) }}">{{ service.domainLabel }}</a>
            </span>
            <span class="category">
                {{ icons.icon('tags', 'Cat√©gorie') }} {% if service.category.parent %}<a href="{{ path('service_index', {service_filter: {category: service.category.parent.id }}) }}">{{ service.category.parent.title }}</a> > {% endif %}<a href="{{ path('service_index', {service_filter: {category: service.category.id }}) }}">{{ service.category.title }}</a>
            </span>
        </p>
        {% if service.getPictureWebPath %}
            <div class="service-content-image">
                <a href="{{ service.getPictureWebPath }}"><img
                            src="{{ service.getPictureWebPath | imagine_filter('service_thumb') }}"
                            srcset="{{ service.getPictureWebPath | imagine_filter('service_thumb') }} 1x,
                    {{ service.getPictureWebPath | imagine_filter('service_thumb2x') }} 2x" /></a>
            </div>
        {% endif %}
        <div class="service-content-body">
            {{ service.body|raw }}
        </div>
    </div>
</section>

{% if is_granted("comment-service") %}
<section id="comments">
    <div class="wrapper">
        <div id="disqus_thread" data-shortname="boutsdefisel" data-title="{{ service.title }} - par {{ service.user.username }}"></div>
    </div>
</section>
{% endif %}
{% endblock %}
